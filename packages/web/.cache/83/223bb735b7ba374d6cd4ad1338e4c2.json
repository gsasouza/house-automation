{"id":"../../../node_modules/chunkinator/dist/chunkinator.js","dependencies":[{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js.map","includedInParent":true,"mtime":1561012225508},{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\packages\\web\\package.json","includedInParent":true,"mtime":1561012880883},{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\package.json","includedInParent":true,"mtime":1561012225508},{"name":"rxjs/operators/tap","loc":{"line":3,"column":20},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\rxjs\\operators\\tap.js"},{"name":"rxjs/operators/concatMap","loc":{"line":4,"column":26},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\rxjs\\operators\\concatMap.js"},{"name":"rxjs/observable/fromPromise","loc":{"line":5,"column":28},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\rxjs\\observable\\fromPromise.js"},{"name":"rxjs/Subject","loc":{"line":6,"column":24},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\rxjs\\Subject.js"},{"name":"./slicenator","loc":{"line":7,"column":27},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\slicenator.js"},{"name":"./hashinator","loc":{"line":8,"column":27},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\hashinator.js"},{"name":"./probinator","loc":{"line":9,"column":27},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\probinator.js"},{"name":"./uploadinator","loc":{"line":10,"column":29},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\uploadinator.js"},{"name":"./processinator","loc":{"line":11,"column":30},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\processinator.js"},{"name":"./utils","loc":{"line":12,"column":22},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\chunkinator.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\utils.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tap_1 = require(\"rxjs/operators/tap\");\nvar concatMap_1 = require(\"rxjs/operators/concatMap\");\nvar fromPromise_1 = require(\"rxjs/observable/fromPromise\");\nvar Subject_1 = require(\"rxjs/Subject\");\nvar slicenator_1 = require(\"./slicenator\");\nvar hashinator_1 = require(\"./hashinator\");\nvar probinator_1 = require(\"./probinator\");\nvar uploadinator_1 = require(\"./uploadinator\");\nvar processinator_1 = require(\"./processinator\");\nvar utils_1 = require(\"./utils\");\nexports.getObservableFromFile = function (file, options, callbacks) {\n    return fromPromise_1.fromPromise(utils_1.fetchBlob(file)).pipe(concatMap_1.concatMap(function (blob) {\n        var chunkSize = options.chunkSize;\n        var onProgress = callbacks.onProgress;\n        var totalChunks = Math.ceil(blob.size / chunkSize);\n        var slicenatedBlobs = slicenator_1.slicenator(blob, { size: chunkSize });\n        var hashinatedBlobs = hashinator_1.hashinator(slicenatedBlobs, {\n            concurrency: options.hashingConcurrency,\n            hasher: options.hashingFunction\n        });\n        var probinatedBlobs = probinator_1.probinator(hashinatedBlobs, {\n            batchSize: options.probingBatchSize,\n            prober: options.probingFunction\n        });\n        var uploadedChunks = 0;\n        var uploadedBlobs = uploadinator_1.uploadinator(probinatedBlobs, {\n            concurrency: options.uploadingConcurrency,\n            uploader: options.uploadingFunction\n        });\n        if (onProgress) {\n            uploadedBlobs = uploadedBlobs.pipe(tap_1.tap(function () {\n                uploadedChunks += 1;\n                onProgress(uploadedChunks / totalChunks);\n            }));\n        }\n        return processinator_1.processinator(uploadedBlobs, {\n            batchSize: options.processingBatchSize,\n            processor: options.processingFunction\n        });\n    }));\n};\nexports.chunkinator = function (file, options, callbacks) {\n    return toCancelablePromise(exports.getObservableFromFile(file, options, callbacks));\n};\nfunction toCancelablePromise(observable) {\n    var subject = new Subject_1.Subject();\n    var subscription = observable.subscribe(subject);\n    return {\n        response: subject.toPromise(),\n        cancel: function () {\n            subscription.unsubscribe();\n            subject.error(\"canceled\");\n        }\n    };\n}\nexports.toCancelablePromise = toCancelablePromise;\n"},"sourceMaps":{"js":{"version":3,"file":"chunkinator.js","sourceRoot":"","sources":["../src/chunkinator.ts"],"names":[],"mappings":";;AAAA,0CAAyC;AACzC,sDAAqD;AACrD,2DAA0D;AAC1D,wCAAuC;AASvC,2CAA0C;AAC1C,2CAA0C;AAC1C,2CAA0C;AAC1C,+CAA8C;AAC9C,iDAAgD;AAChD,iCAAoC;AAEvB,QAAA,qBAAqB,GAAG,UACnC,IAAqB,EACrB,OAAgB,EAChB,SAAoB;IAEpB,OAAA,yBAAW,CAAC,iBAAS,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAC/B,qBAAS,CAAC,UAAA,IAAI;QACJ,IAAA,6BAAS,CAAa;QACtB,IAAA,iCAAU,CAAe;QACjC,IAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC;QACrD,IAAM,eAAe,GAAG,uBAAU,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC;QAC9D,IAAM,eAAe,GAAG,uBAAU,CAAC,eAAe,EAAE;YAClD,WAAW,EAAE,OAAO,CAAC,kBAAkB;YACvC,MAAM,EAAE,OAAO,CAAC,eAAe;SAChC,CAAC,CAAC;QACH,IAAM,eAAe,GAAG,uBAAU,CAAC,eAAe,EAAE;YAClD,SAAS,EAAE,OAAO,CAAC,gBAAgB;YACnC,MAAM,EAAE,OAAO,CAAC,eAAe;SAChC,CAAC,CAAC;QAEH,IAAI,cAAc,GAAG,CAAC,CAAC;QAEvB,IAAI,aAAa,GAAG,2BAAY,CAAC,eAAe,EAAE;YAChD,WAAW,EAAE,OAAO,CAAC,oBAAoB;YACzC,QAAQ,EAAE,OAAO,CAAC,iBAAiB;SACpC,CAAC,CAAC;QAEH,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YACf,aAAa,GAAG,aAAa,CAAC,IAAI,CAChC,SAAG,CAAC;gBACF,cAAc,IAAI,CAAC,CAAC;gBACpB,UAAU,CAAC,cAAc,GAAG,WAAW,CAAC,CAAC;YAC3C,CAAC,CAAC,CACH,CAAC;QACJ,CAAC;QACD,MAAM,CAAC,6BAAa,CAAC,aAAa,EAAE;YAClC,SAAS,EAAE,OAAO,CAAC,mBAAmB;YACtC,SAAS,EAAE,OAAO,CAAC,kBAAkB;SACtC,CAAC,CAAC;IACL,CAAC,CAAC,CACH;AAnCD,CAmCC,CAAC;AAES,QAAA,WAAW,GAAgB,UAAC,IAAI,EAAE,OAAO,EAAE,SAAS;IAC/D,MAAM,CAAC,mBAAmB,CAAC,6BAAqB,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC;AAC9E,CAAC,CAAC;AAEF,6BACE,UAAyB;IAEzB,IAAM,OAAO,GAAG,IAAI,iBAAO,EAAK,CAAC;IACjC,IAAM,YAAY,GAAG,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACnD,MAAM,CAAC;QACL,QAAQ,EAAE,OAAO,CAAC,SAAS,EAAE;QAC7B,MAAM,EAAE;YACN,YAAY,CAAC,WAAW,EAAE,CAAC;YAC3B,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC5B,CAAC;KACF,CAAC;AACJ,CAAC;AAZD,kDAYC","sourcesContent":[null]}},"error":null,"hash":"e265bbe734cfb4e905367eed26f59018","cacheData":{"env":{}}}