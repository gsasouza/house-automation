{"id":"../../../node_modules/@atlaskit/media-client/uploader.js","dependencies":[{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\uploader.js.map","includedInParent":true,"mtime":1561012225426},{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\src\\uploader.ts","includedInParent":true,"mtime":1561012225426},{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\packages\\web\\package.json","includedInParent":true,"mtime":1561012880883},{"name":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\package.json","includedInParent":true,"mtime":1561012225426},{"name":"tslib","loc":{"line":2,"column":25},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\uploader.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\tslib\\tslib.es6.js"},{"name":"chunkinator","loc":{"line":3,"column":24},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\uploader.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\chunkinator\\dist\\index.js"},{"name":"./utils/hashing/hasherCreator","loc":{"line":4,"column":29},"parent":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\uploader.js","resolved":"C:\\Users\\gabri\\Documents\\usp\\codes\\eletronica-2\\node_modules\\@atlaskit\\media-client\\utils\\hashing\\hasherCreator.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadFile = void 0;\n\nvar tslib_1 = _interopRequireWildcard(require(\"tslib\"));\n\nvar _chunkinator = _interopRequireDefault(require(\"chunkinator\"));\n\nvar _hasherCreator = require(\"./utils/hashing/hasherCreator\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nvar _this = void 0;\n\nvar hashingFunction = function (blob) {\n  return tslib_1.__awaiter(_this, void 0, void 0, function () {\n    var hasher;\n    return tslib_1.__generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , (0, _hasherCreator.createHasher)()];\n\n        case 1:\n          hasher = _a.sent();\n          return [2\n          /*return*/\n          , hasher.hash(blob)];\n      }\n    });\n  });\n};\n\nvar createProbingFunction = function (store, collection) {\n  return function (chunks) {\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n      var response, results;\n      return tslib_1.__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , store.probeChunks(hashedChunks(chunks), collection)];\n\n          case 1:\n            response = _a.sent();\n            results = response.data.results;\n            return [2\n            /*return*/\n            , Object.values(results).map(function (result) {\n              return result.exists;\n            })];\n        }\n      });\n    });\n  };\n};\n\nvar createUploadingFunction = function (store, collection) {\n  return function (chunk) {\n    return store.uploadChunk(chunk.hash, chunk.blob, collection);\n  };\n};\n\nvar createProcessingFunction = function (store, deferredUploadId, collection) {\n  var offset = 0;\n  return function (chunks) {\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n      var _a, _b;\n\n      return tslib_1.__generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            _b = (_a = store).appendChunksToUpload;\n            return [4\n            /*yield*/\n            , deferredUploadId];\n\n          case 1:\n            return [4\n            /*yield*/\n            , _b.apply(_a, [_c.sent(), {\n              chunks: hashedChunks(chunks),\n              offset: offset\n            }, collection])];\n\n          case 2:\n            _c.sent();\n\n            offset += chunks.length;\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n};\n\nvar uploadFile = function (file, store, uploadableFileUpfrontIds, callbacks) {\n  var content = file.content,\n      collection = file.collection,\n      name = file.name,\n      mimeType = file.mimeType;\n  var id = uploadableFileUpfrontIds.id,\n      occurrenceKey = uploadableFileUpfrontIds.occurrenceKey,\n      deferredUploadId = uploadableFileUpfrontIds.deferredUploadId;\n\n  var _a = (0, _chunkinator.default)(content, {\n    hashingFunction: hashingFunction,\n    hashingConcurrency: 5,\n    probingBatchSize: 100,\n    chunkSize: 4 * 1024 * 1024,\n    uploadingConcurrency: 3,\n    uploadingFunction: createUploadingFunction(store, collection),\n    probingFunction: createProbingFunction(store, collection),\n    processingBatchSize: 1000,\n    processingFunction: createProcessingFunction(store, deferredUploadId, collection)\n  }, {\n    onProgress: function (progress) {\n      if (callbacks) {\n        callbacks.onProgress(progress);\n      }\n    }\n  }),\n      response = _a.response,\n      cancel = _a.cancel;\n\n  var onUploadFinish = callbacks && callbacks.onUploadFinish || function () {};\n\n  Promise.all([deferredUploadId, response]).then(function (_a) {\n    var _b = tslib_1.__read(_a, 1),\n        uploadId = _b[0];\n\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\n      return tslib_1.__generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , store.createFileFromUpload({\n              uploadId: uploadId,\n              name: name,\n              mimeType: mimeType\n            }, {\n              occurrenceKey: occurrenceKey,\n              collection: collection,\n              replaceFileId: id\n            })];\n\n          case 1:\n            _c.sent();\n\n            onUploadFinish();\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }).catch(onUploadFinish);\n  return {\n    cancel: cancel\n  };\n};\n\nexports.uploadFile = uploadFile;\n\nvar hashedChunks = function (chunks) {\n  return chunks.map(function (chunk) {\n    return chunk.hash;\n  });\n};"},"sourceMaps":{"js":{"mappings":[{"source":"src/uploader.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":10,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":12,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":18,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":18,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":18,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":18,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":20,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":20,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":21},"generated":{"line":20,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":24},"generated":{"line":20,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":31},"generated":{"line":20,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":24},"generated":{"line":20,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":20,"column":38}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":39}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":40}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":42}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":47}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":48}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":50}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":21,"column":62}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":26,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":26,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":26,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":27,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":28,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":23},"generated":{"line":28,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":28,"column":46}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":28,"column":47}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":31,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":31,"column":10}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":31,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":31,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":31,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":31,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":31,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":31,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":32,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":32,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":32,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":33,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":34,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":34,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":34,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":16},"generated":{"line":34,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":34,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":21},"generated":{"line":34,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":34,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":34,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":34,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":37,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":41},"generated":{"line":37,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":33,"column":1},"generated":{"line":38,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":38,"column":1}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":40,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":6},"generated":{"line":40,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":27},"generated":{"line":40,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":30},"generated":{"line":40,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":40,"column":38}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":30},"generated":{"line":40,"column":43}},{"source":"src/uploader.ts","name":null,"original":{"line":37,"column":2},"generated":{"line":40,"column":45}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":30},"generated":{"line":40,"column":55}},{"source":"src/uploader.ts","name":null,"original":{"line":37,"column":21},"generated":{"line":40,"column":57}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":5},"generated":{"line":41,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":5},"generated":{"line":41,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":12},"generated":{"line":41,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":5},"generated":{"line":41,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":41,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":42}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":44}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":49}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":50}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":52}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":42,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":47,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":47,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":47,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":48,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":49,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":49,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":30},"generated":{"line":49,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":31},"generated":{"line":49,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":49,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":43},"generated":{"line":49,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":55},"generated":{"line":49,"column":44}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":56},"generated":{"line":49,"column":45}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":55},"generated":{"line":49,"column":51}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":49,"column":52}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":65},"generated":{"line":49,"column":54}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":49,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":49,"column":65}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":49,"column":66}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":52,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":52,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":52,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":52,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":52,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":52,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":52,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":52,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":53,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":53,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":15},"generated":{"line":53,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":53,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":53,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":27},"generated":{"line":53,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":53,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":32},"generated":{"line":53,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":53,"column":43}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":54,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":54,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":54,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":55,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":56,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":56,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":24},"generated":{"line":56,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":25},"generated":{"line":56,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":56,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":32},"generated":{"line":56,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":56,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":41},"generated":{"line":56,"column":37}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":56,"column":40}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":45},"generated":{"line":56,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":46},"generated":{"line":56,"column":51}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":45},"generated":{"line":56,"column":57}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":57},"generated":{"line":56,"column":59}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":62},"generated":{"line":57,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":62},"generated":{"line":57,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":68},"generated":{"line":57,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":69},"generated":{"line":57,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":62},"generated":{"line":57,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":75},"generated":{"line":58,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":58,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":58,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":58,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":61,"column":5}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":27},"generated":{"line":61,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":43,"column":1},"generated":{"line":62,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":38,"column":5},"generated":{"line":62,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":43,"column":1},"generated":{"line":63,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":35,"column":0},"generated":{"line":63,"column":1}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":65,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":65,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":29},"generated":{"line":65,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":65,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":65,"column":40}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":65,"column":45}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":52},"generated":{"line":65,"column":47}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":65,"column":57}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":71},"generated":{"line":65,"column":59}},{"source":"src/uploader.ts","name":null,"original":{"line":46,"column":2},"generated":{"line":66,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":66,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":66,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":66,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":46,"column":22},"generated":{"line":66,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":67,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":67,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":22},"generated":{"line":67,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":27},"generated":{"line":67,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":28},"generated":{"line":67,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":39}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":34},"generated":{"line":67,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":39},"generated":{"line":67,"column":46}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":40},"generated":{"line":67,"column":47}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":51}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":46},"generated":{"line":67,"column":53}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":63}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":67,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":47,"column":57},"generated":{"line":68,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":46,"column":2},"generated":{"line":68,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":48,"column":1},"generated":{"line":69,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":69,"column":1}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":0},"generated":{"line":71,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":71,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":30},"generated":{"line":71,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":71,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":51,"column":2},"generated":{"line":71,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":71,"column":46}},{"source":"src/uploader.ts","name":null,"original":{"line":52,"column":2},"generated":{"line":71,"column":48}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":71,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":71,"column":66}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":33},"generated":{"line":71,"column":76}},{"source":"src/uploader.ts","name":null,"original":{"line":53,"column":21},"generated":{"line":71,"column":78}},{"source":"src/uploader.ts","name":null,"original":{"line":55,"column":2},"generated":{"line":72,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":72,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":72,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":55,"column":15},"generated":{"line":72,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":55,"column":2},"generated":{"line":72,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":2},"generated":{"line":73,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":9},"generated":{"line":73,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":16},"generated":{"line":73,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":9},"generated":{"line":73,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":73,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":42}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":44}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":49}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":50}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":52}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":74,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":16},"generated":{"line":80,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":80,"column":50}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":81,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":81,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":81,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":82,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":83,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":83,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":83,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":83,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":86,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":86,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":86,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":87,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":88,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":88,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":88,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":88,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":88,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":88,"column":37}},{"source":"src/uploader.ts","name":null,"original":{"line":59,"column":6},"generated":{"line":88,"column":39}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":8},"generated":{"line":89,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":8},"generated":{"line":89,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":89,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":89,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":28},"generated":{"line":89,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":29},"generated":{"line":89,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":60,"column":28},"generated":{"line":89,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":59,"column":6},"generated":{"line":89,"column":42}},{"source":"src/uploader.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":90,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":90,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":61,"column":14},"generated":{"line":90,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":61,"column":14},"generated":{"line":90,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":59,"column":6},"generated":{"line":91,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":91,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":91,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":91,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":10},"generated":{"line":91,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":91,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":91,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":94,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":94,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":94,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":94,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":94,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":96,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":96,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":96,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":14},"generated":{"line":96,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":96,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":21},"generated":{"line":96,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":96,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":102,"column":5}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":31},"generated":{"line":102,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":66,"column":3},"generated":{"line":103,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":56,"column":2},"generated":{"line":103,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":67,"column":1},"generated":{"line":104,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":50,"column":0},"generated":{"line":104,"column":1}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":7},"generated":{"line":106,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":13},"generated":{"line":106,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":23},"generated":{"line":106,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":106,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":106,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":106,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":71,"column":2},"generated":{"line":106,"column":33}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":106,"column":38}},{"source":"src/uploader.ts","name":null,"original":{"line":72,"column":2},"generated":{"line":106,"column":40}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":106,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":73,"column":2},"generated":{"line":106,"column":66}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":26},"generated":{"line":106,"column":75}},{"source":"src/uploader.ts","name":null,"original":{"line":73,"column":33},"generated":{"line":106,"column":77}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":107,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":108,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":108,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":108,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":108,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":108,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":108,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":108,"column":34}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":109,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":31},"generated":{"line":109,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":31},"generated":{"line":109,"column":10}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":31},"generated":{"line":109,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":31},"generated":{"line":109,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":31},"generated":{"line":109,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":109,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":110,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":110,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":110,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":110,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":110,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":110,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":75,"column":10},"generated":{"line":110,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":8}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":111,"column":38}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":112,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":112,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":112,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":112,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":112,"column":46}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":112,"column":47}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":112,"column":60}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":113,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":113,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":113,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":113,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":113,"column":49}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":113,"column":50}},{"source":"src/uploader.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":113,"column":66}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":8}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":37}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":44}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":115,"column":46}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":116,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":117,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":118,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":119,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":120,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":121,"column":65}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":122,"column":61}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":123,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":125,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":125,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":131,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":131,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":132,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":132,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":132,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":132,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":132,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":132,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":132,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":133,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":133,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":133,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":133,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":133,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":133,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":79,"column":8},"generated":{"line":133,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":2},"generated":{"line":135,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":8},"generated":{"line":135,"column":6}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":135,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":26},"generated":{"line":135,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":35},"generated":{"line":135,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":39},"generated":{"line":135,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":48},"generated":{"line":135,"column":45}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":49},"generated":{"line":135,"column":46}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":25},"generated":{"line":135,"column":60}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":69},"generated":{"line":135,"column":64}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":69},"generated":{"line":135,"column":76}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":77},"generated":{"line":135,"column":77}},{"source":"src/uploader.ts","name":null,"original":{"line":105,"column":2},"generated":{"line":135,"column":78}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":137,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":137,"column":2}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":9},"generated":{"line":137,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":10},"generated":{"line":137,"column":10}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":137,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":14},"generated":{"line":137,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":15},"generated":{"line":137,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":14},"generated":{"line":137,"column":31}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":33},"generated":{"line":137,"column":33}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":14},"generated":{"line":137,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":137,"column":42}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":5},"generated":{"line":137,"column":44}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":137,"column":48}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":137,"column":49}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":137,"column":59}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":137,"column":61}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":27},"generated":{"line":137,"column":63}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":8}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":10}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":28}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":17},"generated":{"line":138,"column":33}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":139,"column":8}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":139,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":139,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":139,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":139,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":107,"column":18},"generated":{"line":139,"column":23}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":145,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":145,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":145,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":146,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":147,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":12},"generated":{"line":147,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":17},"generated":{"line":147,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":18},"generated":{"line":147,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":12},"generated":{"line":147,"column":40}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":147,"column":41}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":10},"generated":{"line":148,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":10},"generated":{"line":148,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":18},"generated":{"line":148,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":18},"generated":{"line":148,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":148,"column":32}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":20},"generated":{"line":149,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":20},"generated":{"line":149,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":24},"generated":{"line":149,"column":18}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":24},"generated":{"line":149,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":149,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":26},"generated":{"line":150,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":26},"generated":{"line":150,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":34},"generated":{"line":150,"column":22}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":34},"generated":{"line":150,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":151,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":12},"generated":{"line":151,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":151,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":111,"column":10},"generated":{"line":152,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":111,"column":10},"generated":{"line":152,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":111,"column":23},"generated":{"line":152,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":111,"column":23},"generated":{"line":152,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":152,"column":42}},{"source":"src/uploader.ts","name":null,"original":{"line":112,"column":10},"generated":{"line":153,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":112,"column":10},"generated":{"line":153,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":112,"column":20},"generated":{"line":153,"column":24}},{"source":"src/uploader.ts","name":null,"original":{"line":112,"column":20},"generated":{"line":153,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":153,"column":36}},{"source":"src/uploader.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":154,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":113,"column":10},"generated":{"line":154,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":113,"column":23},"generated":{"line":154,"column":27}},{"source":"src/uploader.ts","name":null,"original":{"line":113,"column":25},"generated":{"line":154,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":110,"column":8},"generated":{"line":155,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":12},"generated":{"line":155,"column":13}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":155,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":155,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":158,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":158,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":158,"column":14}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":158,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":158,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":160,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":160,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":116,"column":20},"generated":{"line":160,"column":26}},{"source":"src/uploader.ts","name":null,"original":{"line":117,"column":5},"generated":{"line":167,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":167,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":118,"column":5},"generated":{"line":167,"column":5}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":167,"column":10}},{"source":"src/uploader.ts","name":null,"original":{"line":118,"column":11},"generated":{"line":167,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":106,"column":2},"generated":{"line":167,"column":25}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":2},"generated":{"line":168,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":9},"generated":{"line":168,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":11},"generated":{"line":169,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":11},"generated":{"line":169,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":17},"generated":{"line":169,"column":10}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":17},"generated":{"line":169,"column":12}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":9},"generated":{"line":170,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":120,"column":2},"generated":{"line":170,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":121,"column":1},"generated":{"line":171,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":69,"column":7},"generated":{"line":171,"column":1}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":175,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":6},"generated":{"line":175,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":18},"generated":{"line":175,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":21},"generated":{"line":175,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":22},"generated":{"line":175,"column":29}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":21},"generated":{"line":175,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":37},"generated":{"line":175,"column":37}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":42},"generated":{"line":176,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":42},"generated":{"line":176,"column":9}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":48},"generated":{"line":176,"column":15}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":49},"generated":{"line":176,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":42},"generated":{"line":176,"column":19}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":53},"generated":{"line":176,"column":20}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":53},"generated":{"line":176,"column":30}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":53},"generated":{"line":176,"column":35}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":58},"generated":{"line":176,"column":37}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":62},"generated":{"line":177,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":62},"generated":{"line":177,"column":11}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":67},"generated":{"line":177,"column":16}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":68},"generated":{"line":177,"column":17}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":62},"generated":{"line":177,"column":21}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":72},"generated":{"line":178,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":42},"generated":{"line":178,"column":3}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":42},"generated":{"line":178,"column":4}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":73},"generated":{"line":179,"column":0}},{"source":"src/uploader.ts","name":null,"original":{"line":123,"column":0},"generated":{"line":179,"column":1}}],"sources":{"src/uploader.ts":"import chunkinator, { Chunk, ChunkinatorFile } from 'chunkinator';\n\nimport { MediaStore } from '.';\nimport { createHasher } from './utils/hashing/hasherCreator';\n\n// TODO: Allow to pass multiple files\nexport type UploadableFile = {\n  content: ChunkinatorFile;\n  name?: string;\n  mimeType?: string;\n  collection?: string;\n};\n\nexport type UploadableFileUpfrontIds = {\n  id: string;\n  deferredUploadId: Promise<string>;\n  occurrenceKey?: string;\n};\n\nexport type UploadFileCallbacks = {\n  onProgress: (progress: number) => void;\n  onUploadFinish: (error?: any) => void;\n};\n\nexport interface UploadFileResult {\n  cancel: () => void;\n}\n\nconst hashingFunction = async (blob: Blob): Promise<string> => {\n  const hasher = await createHasher();\n\n  return hasher.hash(blob);\n};\n\nconst createProbingFunction = (\n  store: MediaStore,\n  collection?: string,\n) => async (chunks: Chunk[]): Promise<boolean[]> => {\n  const response = await store.probeChunks(hashedChunks(chunks), collection);\n  const results = response.data.results;\n\n  return (Object as any).values(results).map((result: any) => result.exists);\n};\n\nconst createUploadingFunction = (store: MediaStore, collection?: string) => {\n  return (chunk: Chunk) =>\n    store.uploadChunk(chunk.hash, chunk.blob, collection);\n};\n\nconst createProcessingFunction = (\n  store: MediaStore,\n  deferredUploadId: Promise<string>,\n  collection?: string,\n) => {\n  let offset = 0;\n  return async (chunks: Chunk[]) => {\n    await store.appendChunksToUpload(\n      await deferredUploadId,\n      {\n        chunks: hashedChunks(chunks),\n        offset,\n      },\n      collection,\n    );\n    offset += chunks.length;\n  };\n};\n\nexport const uploadFile = (\n  file: UploadableFile,\n  store: MediaStore,\n  uploadableFileUpfrontIds: UploadableFileUpfrontIds,\n  callbacks?: UploadFileCallbacks,\n): UploadFileResult => {\n  const { content, collection, name, mimeType } = file;\n\n  const { id, occurrenceKey, deferredUploadId } = uploadableFileUpfrontIds;\n\n  const { response, cancel } = chunkinator(\n    content,\n    {\n      hashingFunction,\n      hashingConcurrency: 5,\n      probingBatchSize: 100,\n      chunkSize: 4 * 1024 * 1024,\n      uploadingConcurrency: 3,\n      uploadingFunction: createUploadingFunction(store, collection),\n      probingFunction: createProbingFunction(store, collection),\n      processingBatchSize: 1000,\n      processingFunction: createProcessingFunction(\n        store,\n        deferredUploadId,\n        collection,\n      ),\n    },\n    {\n      onProgress(progress: number) {\n        if (callbacks) {\n          callbacks.onProgress(progress);\n        }\n      },\n    },\n  );\n\n  const onUploadFinish = (callbacks && callbacks.onUploadFinish) || (() => {});\n  Promise.all([deferredUploadId, response])\n    .then(async ([uploadId]) => {\n      await store.createFileFromUpload(\n        { uploadId, name, mimeType },\n        {\n          occurrenceKey,\n          collection,\n          replaceFileId: id,\n        },\n      );\n      onUploadFinish();\n    })\n    .catch(onUploadFinish);\n\n  return { cancel };\n};\n\nconst hashedChunks = (chunks: Chunk[]) => chunks.map(chunk => chunk.hash);\n"},"lineCount":null}},"error":null,"hash":"dde8da4c65b48d5999c50b8118bdc1c0","cacheData":{"env":{}}}